function CBallChallenge(e){var t,a,i,c,r,n,s,o,_=!1,E=GRAVITY_INCREASE,L=new CVector2(0,INIT_GRAVITY_CHALLENGE),A=50,g=50,l=INIT_BALLMASS_CHALLENGE,S=0,I=0,C=FRICTION_CHALLENGE,h=EDGEFRICTION_CHALLENGE,d=ROTATIONSPEED_CHALLENGE,u=HORIZ_KICKFORCE_CHALLENGE,T=VERT_KICKFORCE_CHALLENGE,Y=RESTITUTION_KICKFORCE_CHALLENGE;this._init=function(e){this._initForces();var c="ball_"+Math.floor(3*Math.random()+1);r=createBitmap(s_oSpriteLibrary.getSprite(c)),r.regX=BALL_SIZE/2,r.regY=BALL_SIZE/2,r.x=CANVAS_WIDTH/2,r.y=CANVAS_HEIGHT/2,n=createBitmap(s_oSpriteLibrary.getSprite("shadow")),n.regX=SHADOW_WIDTH/2,n.regY=SHADOW_HEIGHT/2,n.x=r.x,n.y=CANVAS_HEIGHT-BALL_BOUNCE_YOFFSET,n.alpha=.65,s=createBitmap(s_oSpriteLibrary.getSprite("ball_hit")),s.regX=BALL_SIZE/2,s.regY=BALL_SIZE/2,s.x=CANVAS_WIDTH/2,s.y=CANVAS_HEIGHT/2,s.alpha=0,s_oStage.addChild(n),s_oStage.addChild(r),s_oStage.addChild(s),r.on("mousedown",this.clicked,this),t=new CVector2(r.x,r.y),a=new CVector2(0,0),i=new CVector2(0,0),o=e},this._initForces=function(){c=new CVector2(L.getX(),L.getY()),u=A,T=g},this._updateForces=function(){c.set(0,c.getY()+E),T+=4*E,u+=4*E/2},this.getInitialScoringdata=function(){return{tick:E,initGravity:L.getY()}},this.unload=function(){s_oStage.removeChild(r,n,s),r=void 0},this.update=function(){i.addV(c),this._friction(),a.addV(i),t.addV(a),i._init(0,0),r.x=t.getX(),r.y=t.getY(),I=a.getX(),S+=I,r.rotation=S*d,n.x=r.x,n.scaleX=n.scaleY=r.y/(CANVAS_HEIGHT-BALL_SIZE/2-BALL_BOUNCE_YOFFSET),s.x=r.x,s.y=r.y,s.rotation=S*d},this.checkEdges=function(){if(t.getX()<BALL_SIZE/2?(t.set(BALL_SIZE/2,t.getY()),a.set(-(1-h)*a.getX(),a.getY())):t.getX()>CANVAS_WIDTH-BALL_SIZE/2&&(t.set(CANVAS_WIDTH-BALL_SIZE/2,t.getY()),a.set(-(1-h)*a.getX(),a.getY())),t.getY()>CANVAS_HEIGHT-BALL_SIZE/2-BALL_BOUNCE_YOFFSET)return t.set(t.getX(),CANVAS_HEIGHT-BALL_SIZE/2-BALL_BOUNCE_YOFFSET),a.set(a.getX(),-(1-h)*a.getY()),this._initForces(),!0},this.applyForce=function(e){var t=new CVector2(e.getX(),e.getY());t.scalarDivision(l),i.addV(t)},this.clicked=function(e){DISABLE_SOUND_MOBILE!==!1&&s_bMobile!==!1||createjs.Sound.play("tap"),this._updateForces(),o.increaseScore(),o.playerAnim(t.getX(),t.getY()),a.set(-Y*a.getX(),-Y*a.getY());var i=new CVector2(-e.rawX+t.getX(),-1*(e.rawY-(t.getY()-BALL_SIZE/2)));i.normalize();var c=new CVector2(i.getX()*u,i.getY()*T-0);this.applyForce(c),_===!1&&(_=!0,createjs.Tween.get(r).to({scaleX:1.15,scaleY:.85},100,createjs.Ease.cubicIn).call(function(){createjs.Tween.get(r).to({scaleX:1,scaleY:1},100,createjs.Ease.cubicOut).call(function(){})}),createjs.Tween.get(s).to({scaleX:1.15,scaleY:.85,alpha:.4},100,createjs.Ease.cubicIn).call(function(){createjs.Tween.get(s).to({scaleX:1,scaleY:1,alpha:0},100,createjs.Ease.cubicOut).call(function(){_=!1})}))},this._friction=function(){var e=new CVector2(a.getX(),a.getY());e.scalarProduct(-1),e.normalize(),e.scalarProduct(C),this.applyForce(e)},this._v2Limit=function(e,t){e.length()>=t&&(e.normalize(),e.scalarProduct(t))},this._init(e)}