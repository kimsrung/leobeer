function CPreloader(){var e,a,i,t,r,s,n;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this),s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg"),s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png"),s_oSpriteLibrary.loadSprites(),n=new createjs.Container,s_oStage.addChild(n)},this.unload=function(){n.removeAllChildren()},this.hide=function(){var e=this;setTimeout(function(){createjs.Tween.get(s).to({alpha:1},500).call(function(){e.unload(),s_oMain.gotoMenu()})},1e3)},this._onImagesLoaded=function(){},this._onAllImagesLoaded=function(){this.attachSprites(),s_oMain.preloaderReady()},this.attachSprites=function(){var d=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));n.addChild(d);var o=s_oSpriteLibrary.getSprite("progress_bar");t=createBitmap(o),t.x=CANVAS_WIDTH/2-o.width/2,t.y=CANVAS_HEIGHT-180,n.addChild(t),e=o.width,a=o.height,r=new createjs.Shape,r.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(t.x,t.y,1,a),n.addChild(r),t.mask=r,i=new createjs.Text("","30px "+FONT_GAME,"#fff"),i.x=CANVAS_WIDTH/2,i.y=CANVAS_HEIGHT-176,i.shadow=new createjs.Shadow("#000",2,2,2),i.textBaseline="alphabetic",i.textAlign="center",n.addChild(i),s=new createjs.Shape,s.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),s.alpha=0,n.addChild(s)},this.refreshLoader=function(s){i.text=s+"%",r.graphics.clear();var n=Math.floor(s*e/100);r.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(t.x,t.y,n,a)},this._init()}