function CMenu(){var t,e,i,n,o,s,_,a,r,l;this._init=function(){o=createBitmap(s_oSpriteLibrary.getSprite("bg_menu")),s_oStage.addChild(o),t={x:CANVAS_WIDTH/2-170,y:CANVAS_HEIGHT-70};var u=s_oSpriteLibrary.getSprite("but_play");if(s=new CTextButton(t.x,t.y,u,TEXT_PLAY,FONT_GAME,"#ffffff",30,s_oStage),s.addEventListener(ON_MOUSE_UP,this._onButPlay,this,!1),e={x:CANVAS_WIDTH/2+170,y:CANVAS_HEIGHT-70},_=new CTextButton(e.x,e.y,u,TEXT_PLAYCHALLENGE,FONT_GAME,"#ffffff",30,s_oStage),_.addEventListener(ON_MOUSE_UP,this._onButPlayChallenge,this),DISABLE_SOUND_MOBILE===!1||s_bMobile===!1){var u=s_oSpriteLibrary.getSprite("audio_icon");i={x:CANVAS_WIDTH-u.width/4-10,y:u.height/2+10},a=new CToggle(i.x,i.y,u),a.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this),null===s_oSoundTrack&&(s_oSoundTrack=createjs.Sound.play("soundtrack",{loop:-1,volume:.7}))}var u=s_oSpriteLibrary.getSprite("but_credits");n={x:u.height/2+10,y:u.height/2+10},l=new CGfxButton(n.x,n.y,u,s_oStage),l.addEventListener(ON_MOUSE_UP,this._onCredits,this),r=new createjs.Shape,r.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),s_oStage.addChild(r),createjs.Tween.get(r).to({alpha:0},1e3).call(function(){r.visible=!1}),this.refreshButtonPos(s_iOffsetX,s_iOffsetY)},this.unload=function(){s.unload(),s=null,l.unload(),_.unload(),_=null,DISABLE_SOUND_MOBILE!==!1&&s_bMobile!==!1||(a.unload(),a=null),s_oStage.removeAllChildren(),s_oMenu=null},this.refreshButtonPos=function(o,r){DISABLE_SOUND_MOBILE!==!1&&s_bMobile!==!1||a.setPosition(i.x-o,r+i.y),s.setPosition(t.x,t.y-r),_.setPosition(e.x,e.y-r),l.setPosition(n.x+o,r+n.y)},this._onButPlay=function(){this.unload(),s_oMain.gotoGame(!1),$(s_oMain).trigger("start_session")},this._onButPlayChallenge=function(){this.unload(),s_oMain.gotoGame(!0),$(s_oMain).trigger("start_session")},this._onCredits=function(){new CCreditsPanel},this._onAudioToggle=function(){createjs.Sound.setMute(!s_bAudioActive)},s_oMenu=this,this._init()}var s_oMenu=null;