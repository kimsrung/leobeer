function CInterface(e,t){var a,i,n,s,o,c,r,T,_,l,x,h,E,S,A,I=!1;this._init=function(e,t){if(a=e,i=t,n=new createjs.Bitmap(s_oSpriteLibrary.getSprite("bg_game")),s_oStage.addChild(n),DISABLE_SOUND_MOBILE===!1||s_bMobile===!1){var I=s_oSpriteLibrary.getSprite("audio_icon");x={x:CANVAS_WIDTH-I.width/2-35,y:I.height/2+15},s=new CToggle(x.x,x.y,I),s.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this)}var I=s_oSpriteLibrary.getSprite("but_exit");h={x:CANVAS_WIDTH-I.width/2+5,y:I.height/2+8},c=new CGfxButton(h.x,h.y,I),c.addEventListener(ON_MOUSE_UP,this._onExit,this);var d,u,f;i?(d=TEXT_NEWHIGRAVITY,u=TEXT_GRAVITY+INIT_GRAVITY_CHALLENGE,f=TEXT_HIGRAVITY+0):(d=TEXT_NEWHISCORE,u=TEXT_SCORE+0,f=TEXT_HISCORE+0),l=new createjs.Text(d,"24px "+FONT_GAME,"Orange"),l.x=CANVAS_WIDTH/2,l.y=300,l.textBaseline="alphabetic",l.textAlign="center",l.shadow=new createjs.Shadow("#000000",2,2,2),l.visible=!1,E={x:20,y:65},r=new createjs.Text(u,"60px "+FONT_GAME,"#5b8e2d"),r.x=E.x,r.y=E.y,r.textBaseline="alphabetic",r.textAlign="left",r.shadow=new createjs.Shadow("#000000",3,3,2),S={x:20,y:125},T=new createjs.Text(TEXT_TIME,"50px "+FONT_GAME,"#5b8e2d"),T.x=S.x,T.y=S.y,T.textAlign="left",T.textBaseline="alphabetic",T.shadow=new createjs.Shadow("#000000",3,3,2),s_oStage.addChild(T),A={x:CANVAS_WIDTH/2,y:CANVAS_HEIGHT-10},_=new createjs.Text(f,"24px "+FONT_GAME,"#fff"),_.x=A.x,_.y=A.y,_.textBaseline="alphabetic",_.textAlign="center",_.shadow=new createjs.Shadow("#000000",2,2,2),s_oStage.addChild(l,r,_),o=new createjs.Shape,o.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT),s_oStage.addChild(o),createjs.Tween.get(o).to({alpha:0},1e3).call(function(){o.visible=!1}),this.refreshButtonPos(s_iOffsetX,s_iOffsetY)},this.refreshButtonPos=function(e,t){DISABLE_SOUND_MOBILE!==!1&&s_bMobile!==!1||s.setPosition(x.x-e,t+x.y),c.setPosition(h.x-e,h.y+t),r.x=E.x+e,r.y=E.y+t,T.x=S.x+e,T.y=S.y+t,_.x=A.x,_.y=A.y-t},this.unload=function(){s_oStage.removeChild(n,l,r,_),DISABLE_SOUND_MOBILE!==!1&&s_bMobile!==!1||s.unload(),c.unload(),s_oInterface=null},this.updateScore=function(e,t){if(i){var a;a=0===e?INIT_GRAVITY_CHALLENGE:e;var n=TEXT_GRAVITY+a;r.text=n;var s=TEXT_HIGRAVITY+t;_.text=s}else{var n=TEXT_SCORE+e;r.text=n;var s=TEXT_HISCORE+t;_.text=s}},this.refreshTime=function(e){T.text=TEXT_TIME+" "+e},this.newTopScore=function(){I===!1&&(I=!0,l.text=TEXT_NEWHISCORE,l.x=-200,l.alpha=.5,l.visible=!0,l.color="Orange",createjs.Tween.get(l).to({x:CANVAS_WIDTH/2,scaleX:1.5,scaleY:1.5,alpha:1},750,createjs.Ease.backInOut).wait(500).call(function(){createjs.Tween.get(l).to({x:CANVAS_WIDTH+200,scaleX:1,scaleY:1,alpha:.5},750,createjs.Ease.backInOut).call(function(){l.visible=!1,I=!1})}))},this.encouragement=function(){if(I===!1){var e=Math.floor(Math.random()*(TEXT_SUPPORT_STRINGS+1));I=!0,l.text=TEXT_SUPPORT[e],l.x=-200,l.alpha=.5,l.visible=!0,l.color="#fcd000",createjs.Tween.get(l).to({x:CANVAS_WIDTH/2,scaleX:1.5,scaleY:1.5,alpha:1},750,createjs.Ease.backInOut).wait(500).call(function(){createjs.Tween.get(l).to({x:CANVAS_WIDTH+200,scaleX:1,scaleY:1,alpha:.5},750,createjs.Ease.backInOut).call(function(){l.visible=!1,I=!1})})}},this._onExit=function(){this.unload(),a.unload(),$(s_oMain).trigger("end_session")},this._onAudioToggle=function(){createjs.Sound.setMute(!s_bAudioActive)},this.getTopScore=function(){return _.text},s_oInterface=this,this._init(e,t)}var s_oInterface=null;